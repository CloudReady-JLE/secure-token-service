# Multibanking server launch instructions.

Use this VM Argument to start sts as a java application.

Multibanking mock can be user as sample resource server.

```
# The list of resource servers managed by this idp server. The word used here is the name found under "aud" in the jwt token.
RESOURCE_SERVER_NAMES=mbservice,mbmock

# The audience name of the resource server with the name mbservice. This can also be an url, but wont be used 
# for request to the server.
mbservice_AUDIENCE_NAME=mbservice

# The url used to identify the resource server known under the keyworld mbservice
mbservice_ENDPOINT_URL=http://localhost:8081

# The mbservice_JWKS_URL is the json web key set url of the authorization server named mbservice. The idp server
# uses this enpoint to pull the public key used to encrypt corresponding user secret stored in the bearer token.
mbservice_JWKS_URL=http://localhost:8081/pop

# The name of the user secret claim in the token 
mbservice_USER_SECRET_CLAIM=custom_secret

# The audience name of the resource server with the name mbmock. This can also be an url, but wont be used 
# for request to the server.
mbmock_AUDIENCE_NAME=http://localhost:10010

# The url used to identify the resource server known under the keyworld mbmock
mbmock_ENDPOINT_URL=http://localhost:10010

# The mbmock_JWKS_URL is the json web key set url of the authorization server named mbmock. The idp server
# uses this enpoint to pull the public key used to encrypt corresponding user secret stored in the bearer token.
mbmock_JWKS_URL=http://localhost:10010/pop

# The name of the user secret claim in the token 
mbmock_USER_SECRET_CLAIM=mbmock_user_secret

# The spring boot defined port of this server. Default is 8080. This only works if each server
# is run in a proper container.
server.port=8081

# The shared directory where this server store the Keystore shared among all nodes.
# This must be set to an external volume directory if this application is running in a docker container.
JCLOUD_FS_PERSISTENCE_DIR="./target/mbservice"

# This is the keystore password. This password is used to secure the keystore in which private keys of this resource server
# are stored. This information must be passed in a secure maner to this resource server.
KEYSTORE_PASSWORD=assdfo32814

#########
# All parameter defined below will have a default value.
###########

# States if the keystore has to be recreated. This is the case when administrator want to drop existing
# server keys. This shall only be set to true on one server with the purpose of staeting that server 
# to recreate the keystore. After that this shall be set back to false.
RESET_KEYSTORE=false

# Number of signature key to be generated and simultaneously used by this server
SERVER_SIGN_KEY_COUNT=5
# Number of asymmetric encryption key to be generated and simultaneously used by this server
SERVER_ENCRYPT_KEY_COUNT=5
# Number of symmetric encryption key to be generated and simultaneously used by this server
SERVER_SECRET_KEY_COUNT=5
# Type of keystore to use. UBER asumes strong encryption and the bouncy castle provider.
SERVER_KEYSTORE_TYPE=UBER
# The key pair algorithm
SERVER_KEYSTORE_KEYPAIR_ALGO=RSA
# Size of the keypair
SERVER_KEYSTORE_KEYPAIR_SIZE=2048
# Signature algorithm
SERVER_KEYSTORE_RSA_SIGN_ALGO=SHA256withRSA
# Symetric encryption algorithm
SERVER_KEYSTORE_SECRET_KEY_ALGO=AES
# Size of symetric secret key
SERVER_KEYSTORE_SECRET_KEY_SIZE=256

# Name of the container on a file system
SERVER_KEYSTORE_CONTAINER=<APP_NAME>_serverkey_container
# Name of the server keystore
SERVER_KEYSTORE_NAME=<APP_NAME>_keystore
# Name of the server keypair
SERVER_KEYPAIR_NAME=<APP_NAME> Key Pair
# Alias prefix for each keypair generated by this server.
SERVER_KEYALIAS_PREFIX=<APP_NAME>-

```
